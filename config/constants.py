"""
Централизованные константы для системы оценки недвижимости.

Этот файл содержит все ключевые параметры расчётов, которые могут
потребовать корректировки. Изменение значений здесь повлияет на все
модули, которые импортируют эти константы.

Последнее обновление: 2026-01-05
"""

# ==============================================================================
# ИНВЕСТИЦИОННЫЕ РАСЧЁТЫ
# ==============================================================================

# --- Доходность ---
RENOVATION_RATE = 0.04           # Ставка дохода на ремонт/инвестиции - 4% в месяц
RENOVATION_PERIOD_MONTHS = 4     # Фиксированный срок ремонта - 4 месяца

# --- Ремонт ---
RENOVATION_MULTIPLIER = 1.6      # Коэффициент прибавки к цене от ремонта (×1.6)
                                 # Изменено с 1.8 -> 1.6 (2026-01-05)

# --- Кредитование ---
DEFAULT_LTV = 1.0                # Доля кредита от цены - 100%
                                 # Изменено с 0.8 -> 1.0 (2026-01-05)
CBR_SPREAD = 5.5                 # Надбавка к ставке ЦБ для ипотеки

# --- Минимальные пороги ---
MIN_PARTNER_PROFIT = 1_000_000   # Минимальная прибыль партнера - 1 млн ₽
MIN_PARTNER_RATE = 0.04          # Минимальная доходность партнера - 4%/мес

# ==============================================================================
# ФИКСИРОВАННЫЕ РАСХОДЫ
# ==============================================================================

# --- Обязательные ---
SERBSKY_CERTIFICATION = 27_000   # Освидетельствование в Сербского (фикс)
UTILITIES_PER_MONTH = 11_500     # ЖКХ - 11,500 ₽/месяц

# --- Необязательные (по умолчанию включены) ---
NOTARY_FEE = 28_000              # Нотариус
STATE_FEE = 2_000                # Госпошлина
PIP_FEE = 30_000                 # ПИП (выписки, проверка)
AGENCY_FEE_RATE = 0.015          # Услуги агентства - 1.5% от цены

# --- Ремонтные ---
FOREMAN_FEE = 300_000            # Услуги прораба
EVICTION_FEE = 0                 # Выселение (по умолчанию 0)
REGISTRATORS_TRANSFER_FEE = 45_000   # Регистраторы (переход права)
REGISTRATORS_MORTGAGE_FEE = 35_000   # Регистраторы (ипотека)
CONTUR_FEE = 5_000               # Контур.Фокус (проверка)

# ==============================================================================
# ОЦЕНКА НЕДВИЖИМОСТИ
# ==============================================================================

# --- Поиск аналогов ---
DEFAULT_SEARCH_RADIUS_KM = 5     # Радиус поиска аналогов (км)
DEFAULT_COMPARABLES_COUNT = 10   # Количество аналогов для поиска
TOP_COMPARABLES_COUNT = 3        # Топ дешёвых для расчёта

# --- Корректировки ---
AREA_ADJUSTMENT_RATE = 0.002     # Корректировка на площадь (±0.2% на 1м²)
BARGAIN_DISCOUNT = 0.07          # Скидка на торг - 7%

# ==============================================================================
# API И СЕРВИСЫ
# ==============================================================================

# --- DaData ---
DADATA_REQUESTS_PER_SECOND = 10  # Лимит запросов DaData в секунду
DADATA_TIMEOUT_SECONDS = 5       # Таймаут запроса DaData

# --- База данных ---
DEFAULT_PG_DSN = "postgresql://realuser:strongpass123@localhost:5432/realdb"

# ==============================================================================
# UI ОТОБРАЖЕНИЕ
# ==============================================================================

# --- Форматирование ---
CURRENCY_SYMBOL = "₽"
MILLIONS_SUFFIX = "млн"

# --- Ссылки ---
OUR_DB_BASE_URL = "https://realestate.ourdocs.org/listing/"
CIAN_BASE_URL = "https://cian.ru/sale/flat/"

# ==============================================================================
# ИСТОРИЯ ИЗМЕНЕНИЙ
# ==============================================================================
"""
2026-01-05:
- LTV изменён с 80% на 100% (DEFAULT_LTV: 0.8 -> 1.0)
- Множитель ремонта изменён с x1.8 на x1.6 (RENOVATION_MULTIPLIER: 1.8 -> 1.6)
- Добавлен SERBSKY_CERTIFICATION = 27,000 ₽
- Добавлен UTILITIES_PER_MONTH = 11,500 ₽/мес
"""
