# –ó–∞–¥–∞—á–∏: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã

## –°—Ç–∞—Ç—É—Å: üü° –í –ü–õ–ê–ù–ê–•

## –û–±–∑–æ—Ä
–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–≤–∞—Ä—Ç–∏—Ä —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ—Ö–æ–¥–∞ –æ—Ç –∞–¥—Ä–µ—Å–∞ –∫ –∫–∞—Ä—Ç–µ –∏ –æ–±—Ä–∞—Ç–Ω–æ.

## –ó–∞–¥–∞—á–∏

### –≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö

- [ ] **MAP-001**: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≤ –ë–î
  - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∫–æ–ª—å–∫–æ –∑–∞–ø–∏—Å–µ–π –∏–º–µ—é—Ç lat/lon
  - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
  
- [ ] **MAP-002**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥—Ä–µ—Å–æ–≤ —á–µ—Ä–µ–∑ API
  - –í—ã–±—Ä–∞—Ç—å API (–Ø–Ω–¥–µ–∫—Å.–ì–µ–æ–∫–æ–¥–µ—Ä / Dadata / OSM Nominatim)
  - –°–æ–∑–¥–∞—Ç—å –º–æ–¥—É–ª—å `etl/geocoder.py`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `geocode_address(address: str) -> tuple[float, float]`
  
- [ ] **MAP-003**: –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `scripts/geocode_listings.py`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞—Ç—á-–æ–±—Ä–∞–±–æ—Ç–∫—É —Å rate limiting
  - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
  
- [ ] **MAP-004**: –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º
  - –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é `db/migrations/005_add_location_index.sql`
  - –î–æ–±–∞–≤–∏—Ç—å GIST –∏–Ω–¥–µ–∫—Å –¥–ª—è PostGIS –∏–ª–∏ –æ–±—ã—á–Ω—ã–π –∏–Ω–¥–µ–∫—Å –¥–ª—è lat/lon

### –≠—Ç–∞–ø 2: Backend API

- [ ] **MAP-005**: –°–æ–∑–¥–∞—Ç—å endpoint `/api/listings/map`
  - –î–æ–±–∞–≤–∏—Ç—å –≤ `web_viewer.py` –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π `api_map.py`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
  - –í–µ—Ä–Ω—É—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è –∫–∞—Ä—Ç—ã
  
- [ ] **MAP-006**: –°–æ–∑–¥–∞—Ç—å endpoint `/api/listings/{id}/geocode`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞
  - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –ë–î
  - –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  
- [ ] **MAP-007**: –°–æ–∑–¥–∞—Ç—å endpoint `/api/listings/bounds`
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫ –∫–≤–∞—Ä—Ç–∏—Ä –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –∫–∞—Ä—Ç—ã
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω–¥–µ–∫—Å–∞
  - –í–µ—Ä–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
  
- [ ] **MAP-008**: –î–æ–±–∞–≤–∏—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∏–ª–∏ in-memory cache
  - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–∞ 30 –¥–Ω–µ–π
  - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å cache misses

### –≠—Ç–∞–ø 3: Frontend –∫–∞—Ä—Ç–∞

- [ ] **MAP-009**: –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç—ã API
  - –ü–æ–ª—É—á–∏—Ç—å API –∫–ª—é—á
  - –î–æ–±–∞–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç –≤ HTML
  - –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã
  
- [ ] **MAP-010**: –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –∫–∞—Ä—Ç—ã —Å –±–∞–∑–æ–≤—ã–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
  - –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç—É
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ü–µ–Ω—Ç—Ä –∏ –∑—É–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  - –î–æ–±–∞–≤–∏—Ç—å –±–∞–∑–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  
- [ ] **MAP-011**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä–∫–µ—Ä–æ–≤ –∫–≤–∞—Ä—Ç–∏—Ä
  - –°–æ–∑–¥–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä–∫–µ—Ä–æ–≤
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–∫–æ–Ω–∫–∏ –º–∞—Ä–∫–µ—Ä–æ–≤
  - –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∫–ª–∏–∫–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ä—ã
  
- [ ] **MAP-012**: –î–æ–±–∞–≤–∏—Ç—å –≤—Å–ø–ª—ã–≤–∞—é—â–∏–µ –æ–∫–Ω–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
  - –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω popup —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –∫–≤–∞—Ä—Ç–∏—Ä–µ
  - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –ø–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
  - –°—Ç–∏–ª–∏–∑–æ–≤–∞—Ç—å popup
  
- [ ] **MAP-013**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –º–∞—Ä–∫–µ—Ä–æ–≤
  - –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (ymaps.Clusterer)
  - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ç–∞–±–ª–∏—Ü–µ–π

- [ ] **MAP-014**: –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ" –≤ —Ç–∞–±–ª–∏—Ü—É
  - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É –≤ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É —Ç–∞–±–ª–∏—Ü—ã
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–∞—Ä—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
  
- [ ] **MAP-015**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç —Ç–∞–±–ª–∏—Ü—ã –∫ –∫–∞—Ä—Ç–µ
  - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/map` –¥–ª—è –∫–∞—Ä—Ç—ã
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ä—Ç—ã –Ω–∞ –∞–¥—Ä–µ—Å–µ
  - –í—ã–¥–µ–ª–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –º–∞—Ä–∫–µ—Ä
  
- [ ] **MAP-016**: –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –∫–∞—Ä—Ç—ã –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è
  - –î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É –≤ popup –º–∞—Ä–∫–µ—Ä–∞
  - –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É `/listing/{id}` –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –æ–ø–∏—Å–∞–Ω–∏—è
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥ –∫ –∫–∞—Ä—Ç–µ"
  
- [ ] **MAP-017**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–µ–π –∏ –∫–∞—Ä—Ç–æ–π
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã URL –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –û–±–Ω–æ–≤–ª—è—Ç—å –∫–∞—Ä—Ç—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤
  - –û–±–Ω–æ–≤–ª—è—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ

### –≠—Ç–∞–ø 5: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] **MAP-018**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –º–∞—Ä–∫–µ—Ä–æ–≤
  - –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É (—Ç–æ–ª—å–∫–æ –≤–∏–¥–∏–º—ã–µ –Ω–∞ –∫–∞—Ä—Ç–µ)
  - –î–æ–±–∞–≤–∏—Ç—å debounce –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫–∞—Ä—Ç—ã
  - –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –º–∞—Ä–∫–µ—Ä—ã
  
- [ ] **MAP-019**: –î–æ–±–∞–≤–∏—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∞—Ä–∫–µ—Ä–æ–≤
  - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º 1000 –º–∞—Ä–∫–µ—Ä–æ–≤ –Ω–∞ –∫–∞—Ä—Ç–µ
  - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
  - –ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã
  
- [ ] **MAP-020**: –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
  - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å 100, 500, 1000 –º–∞—Ä–∫–µ—Ä–∞–º–∏
  - –ò–∑–º–µ—Ä–∏—Ç—å –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏
  - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  
- [ ] **MAP-021**: –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è
  - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å API
  - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã

1. **–í—ã—Å–æ–∫–∏–π**: MAP-001, MAP-002, MAP-005, MAP-009, MAP-010, MAP-011
2. **–°—Ä–µ–¥–Ω–∏–π**: MAP-003, MAP-006, MAP-012, MAP-014, MAP-015
3. **–ù–∏–∑–∫–∏–π**: MAP-004, MAP-007, MAP-008, MAP-013, MAP-016, MAP-017, MAP-018, MAP-019, MAP-020, MAP-021

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- MAP-002 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-001
- MAP-003 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-002
- MAP-010 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-009
- MAP-011 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-010
- MAP-012 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-011
- MAP-015 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-014
- MAP-016 –∑–∞–≤–∏—Å–∏—Ç –æ—Ç MAP-012

## –û—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

- **–≠—Ç–∞–ø 1**: 1-2 –¥–Ω—è
- **–≠—Ç–∞–ø 2**: 2-3 –¥–Ω—è
- **–≠—Ç–∞–ø 3**: 3-4 –¥–Ω—è
- **–≠—Ç–∞–ø 4**: 1-2 –¥–Ω—è
- **–≠—Ç–∞–ø 5**: 2-3 –¥–Ω—è

**–ò—Ç–æ–≥–æ**: 10-15 —Ä–∞–±–æ—á–∏—Ö –¥–Ω–µ–π

## –†–µ—Å—É—Ä—Å—ã

- API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç (–∏–ª–∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)
- API –∫–ª—é—á –¥–ª—è –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω)
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ø–Ω–¥–µ–∫—Å.–ö–∞—Ä—Ç API
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –º–∞—Ä–∫–µ—Ä–æ–≤

