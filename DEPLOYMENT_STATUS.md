# üéâ CIAN Analytics - Deployment Status

**–î–∞—Ç–∞:** 11 –æ–∫—Ç—è–±—Ä—è 2025  
**IP –°–µ—Ä–≤–µ—Ä–∞:** 91.103.252.36  
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç (—Ç—Ä–µ–±—É–µ—Ç—Å—è –±–æ–ª—å—à–µ RAM)

---

## ‚úÖ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ

### Infrastructure
- [x] **Node.js 20.19.5** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] **npm 10.8.2** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
- [x] **PM2** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫
- [x] **Nginx** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω (–ø–æ—Ä—Ç 3002 ‚Üí 3005)
- [x] **PostgreSQL** —Ä–∞–±–æ—Ç–∞–µ—Ç —Å CIAN –¥–∞–Ω–Ω—ã–º–∏

### Application
- [x] **Frontend code** –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –∏–∑ HouseClick –¥–ª—è CIAN
- [x] **Dependencies** —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (1134 –ø–∞–∫–µ—Ç–∞)
- [x] **PM2 –ø—Ä–æ—Ü–µ—Å—Å** –∑–∞–ø—É—â–µ–Ω
- [x] **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫** –Ω–∞—Å—Ç—Ä–æ–µ–Ω (systemd)

### Git
- [x] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã (88 —Ñ–∞–π–ª–æ–≤, 26K+ —Å—Ç—Ä–æ–∫)
- [x] –ó–∞–ø—É—à–µ–Ω–æ –≤ GitHub (branch: fix1)

---

## ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

### Next.js –Ω–µ —Å—Ç–∞–±–∏–ª–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (25+ —Ä–∞–∑)
- `Empty reply from server` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- Production build –ø–∞–¥–∞–µ—Ç —Å SIGBUS –æ—à–∏–±–∫–æ–π

**–ü—Ä–∏—á–∏–Ω–∞:**
```
RAM –¥–æ—Å—Ç—É–ø–Ω–æ: —Ç–æ–ª—å–∫–æ 824 MB
RAM —Ç—Ä–µ–±—É–µ—Ç—Å—è: –º–∏–Ω–∏–º—É–º 2GB –¥–ª—è Next.js
```

**–õ–æ–≥:**
```
pm2 status
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ id ‚îÇ name             ‚îÇ mode    ‚îÇ pid      ‚îÇ uptime ‚îÇ ‚Ü∫    ‚îÇ status    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ 0  ‚îÇ cian-frontend    ‚îÇ fork    ‚îÇ 209550   ‚îÇ 1s     ‚îÇ 25   ‚îÇ online    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üåê URLs –¥–ª—è –¥–æ—Å—Ç—É–ø–∞

–ü–æ—Å–ª–µ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é:

- **–í–Ω–µ—à–Ω–∏–π –¥–æ—Å—Ç—É–ø:** http://91.103.252.36:3002
- **–ü—Ä—è–º–æ–π –¥–æ—Å—Ç—É–ø:** http://91.103.252.36:3005  
- **–õ–æ–∫–∞–ª—å–Ω—ã–π:** http://localhost:3005

---

## üí° –†–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –£–≤–µ–ª–∏—á–∏—Ç—å RAM (‚≠ê –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

**–®–∞–≥–∏:**
1. –£–≤–µ–ª–∏—á–∏—Ç—å RAM —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ 2-4GB —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ö–æ—Å—Ç–∏–Ω–≥–∞
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä
3. –°–æ–±—Ä–∞—Ç—å production build:
   ```bash
   cd /opt/realestate/frontend
   pm2 stop cian-frontend
   npm run build
   pm2 start ecosystem.config.js
   pm2 save
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ Production-ready

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –î–æ–±–∞–≤–∏—Ç—å Swap

**–®–∞–≥–∏:**
```bash
# –°–æ–∑–¥–∞—Ç—å swap —Ñ–∞–π–ª 2GB
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# –°–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º
echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
cd /opt/realestate/frontend
pm2 stop cian-frontend
npm run build
pm2 start "PORT=3005 npm start" --name cian-frontend
pm2 save
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–µ–µ —á–µ–º RAM
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞–ø–≥—Ä–µ–π–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞
- ‚ö†Ô∏è –ò–∑–Ω–æ—Å –¥–∏—Å–∫–∞

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: Vercel Deployment (üöÄ –ü—Ä–æ—â–µ –≤—Å–µ–≥–æ)

**–®–∞–≥–∏:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Vercel CLI
npm install -g vercel

# –î–µ–ø–ª–æ–π
cd /opt/realestate/frontend
vercel --prod

# –î–æ–±–∞–≤–∏—Ç—å environment variables –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
# PG_USER, PG_PASS, PG_HOST, PG_PORT, PG_DB
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** (–¥–ª—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤)
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π build**
- ‚úÖ **CDN** (–±—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- ‚úÖ **HTTPS** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π SSL)
- ‚úÖ **Zero configuration**
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- ‚ö†Ô∏è PostgreSQL –¥–æ–ª–∂–µ–Ω –ø—Ä–∏–Ω–∏–º–∞—Ç—å –≤–Ω–µ—à–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å firewall –¥–ª—è –ë–î

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: –õ–æ–∫–∞–ª—å–Ω—ã–π Build + Upload

**–®–∞–≥–∏:**
1. –ù–∞ –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ (—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –ø–∞–º—è—Ç—å—é):
   ```bash
   cd frontend/
   npm install
   npm run build
   ```

2. –ó–∞–≥—Ä—É–∑–∏—Ç—å `.next` –∏ `node_modules` –Ω–∞ —Å–µ—Ä–≤–µ—Ä:
   ```bash
   scp -r .next node_modules root@91.103.252.36:/opt/realestate/frontend/
   ```

3. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å production:
   ```bash
   cd /opt/realestate/frontend
   pm2 start "PORT=3005 npm start" --name cian-frontend
   pm2 save
   ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û–±—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –ø–∞–º—è—Ç–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚ö†Ô∏è –ù—É–∂–µ–Ω –∫–æ–º–ø—å—é—Ç–µ—Ä —Å Node.js
- ‚ö†Ô∏è –†—É—á–Ω–æ–π –ø—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–º—è—Ç—å
free -h
               total        used        free      shared  buff/cache   available
Mem:           3.8Gi       3.0Gi       457Mi        22Mi       664Mi       824Mi
Swap:             0B          0B          0B

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å PM2
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Nginx
sudo systemctl status nginx

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
pm2 logs cian-frontend --lines 50
```

---

## ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend
- ‚úÖ PostgreSQL —Å CIAN –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ Python ETL —Å–∏—Å—Ç–µ–º–∞
- ‚úÖ AI photo evaluation –≥–æ—Ç–æ–≤–∞
- ‚úÖ –í—Å–µ 15 –ø–æ–ª–µ–π –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã

### Infrastructure
- ‚úÖ PM2 process manager
- ‚úÖ Nginx reverse proxy
- ‚úÖ –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ systemd
- ‚úÖ Node.js 20 LTS

### Code
- ‚úÖ Frontend –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ CIAN
- ‚úÖ Database connector –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- ‚úÖ SQL –∑–∞–ø—Ä–æ—Å—ã —Å JOINs (prices, photos)
- ‚úÖ AI condition score (1-5)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
- ‚úÖ Responsive design
- ‚úÖ TypeScript types

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞:

- **frontend/README.md** - –û—Å–Ω–æ–≤–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
- **frontend/DEPLOYMENT.md** - –î–µ—Ç–∞–ª—å–Ω—ã–π –≥–∞–π–¥ –ø–æ –¥–µ–ø–ª–æ—é
- **docs/FRONTEND_QUICKSTART.md** - Quickstart guide
- **FRONTEND_SUMMARY.md** - –§–∏–Ω–∞–ª—å–Ω—ã–π summary
- **DEPLOYMENT_STATUS.md** - –≠—Ç–æ—Ç —Ñ–∞–π–ª

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è (–≤—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç):

1. **–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Vercel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, 5 –º–∏–Ω—É—Ç)
2. **–°–∞–º—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π:** –£–≤–µ–ª–∏—á–∏—Ç—å RAM –¥–æ 2-4GB
3. **–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å swap —Ñ–∞–π–ª

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–†–∞–∑–¥–µ–ª–∏—Ç—å frontend –∏ backend:**
   - Frontend –Ω–∞ Vercel/Netlify
   - Backend/–ë–î –Ω–∞ —Ç–µ–∫—É—â–µ–º —Å–µ—Ä–≤–µ—Ä–µ
   
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - PM2 Plus (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
   - Uptime Robot (–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å)
   - Grafana (–º–µ—Ç—Ä–∏–∫–∏)

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - Nginx caching
   - CDN –¥–ª—è —Å—Ç–∞—Ç–∏–∫–∏
   - Database indexing
   - Query optimization

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –°—Ç–∞—Ç—É—Å PM2
pm2 status

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
pm2 logs cian-frontend

# –ü–∞–º—è—Ç—å
free -h

# Nginx
sudo systemctl status nginx

# –ü–æ—Ä—Ç—ã
sudo lsof -i :3005
sudo lsof -i :3002
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫

```bash
# PM2
pm2 restart cian-frontend

# Nginx
sudo systemctl restart nginx

# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 delete cian-frontend
cd /opt/realestate/frontend
pm2 start "PORT=3005 npm run dev" --name cian-frontend
pm2 save
```

---

## üéâ –ò—Ç–æ–≥

**Frontend –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!**

‚úÖ –ö–æ–¥ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω  
‚úÖ Dependencies —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã  
‚úÖ Infrastructure –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞  
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞  

‚ö†Ô∏è **–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ RAM

**–†–µ—à–µ–Ω–∏–µ:** –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ 4 –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –≤—ã—à–µ (Vercel - –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ!)

---

*–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: 11 –æ–∫—Ç—è–±—Ä—è 2025, 19:15 UTC*  
*–°–µ—Ä–≤–µ—Ä: 91.103.252.36*  
*–ü—Ä–æ–µ–∫—Ç: CIAN Analytics v1.0.0*

